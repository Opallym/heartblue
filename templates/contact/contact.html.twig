{% extends 'base.html.twig' %}

{% block title %}
	{{ page_title }}
{% endblock %}

{% block stylesheets %}
	<link rel="stylesheet" href="{{ asset('css/contact.css') }}">
{% endblock %}

{% block body %}
	<div class="contact-container">
		<h1>Contactez-nous</h1>
		<p class="contact-intro">Vous avez des questions ou des suggestions ? Remplissez le formulaire ci-dessous !</p>

		<form id="contactForm" action="#" method="post" class="contact-form">
			<div class="form-group">
				<label for="name">Nom :</label>
				<input type="text" id="name" name="name" required placeholder="Votre nom">
				<span class="error-message">Ce champ est requis</span>
			</div>

			<div class="form-group">
				<label for="email">Email :</label>
				<input type="email" id="email" name="email" required placeholder="Votre email">
				<span class="error-message">Email invalide</span>
			</div>

			<div class="form-group">
				<label for="subject">Sujet :</label>
				<input type="text" id="subject" name="subject" required placeholder="Sujet de votre message">
				<span class="error-message">Ce champ est requis</span>
			</div>

			<div class="form-group">
				<label for="message">Message :</label>
				<textarea id="message" name="message" required placeholder="Votre message"></textarea>
				<span class="error-message">Ce champ est requis</span>
			</div>

			<button type="submit" class="contact-button">Envoyer</button>
			<p class="success-message">Merci ! Votre message a été envoyé.</p>
		</form>
		<div class="hb-contact__footer">
			<a href="/" class="hb-cta">Retour à l'accueil</a>
		</div>
	</div>
	<script>
		document.getElementById('contactForm').addEventListener('submit', function (e) {
e.preventDefault();
let valid = true;

const formGroups = document.querySelectorAll('.form-group');
formGroups.forEach(group => {
const input = group.querySelector('input, textarea');
const error = group.querySelector('.error-message');
if (! input.value.trim()) {
valid = false;
error.style.display = 'block';
} else {
error.style.display = 'none';
}

if (input.type === 'email') {
const regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
if (! regex.test(input.value)) {
valid = false;
error.style.display = 'block';
} else {
error.style.display = 'none';
}
}

});

if (valid) {
document.querySelector('.success-message').style.display = 'block';
this.reset();
} else {
document.querySelector('.success-message').style.display = 'none';
}
});
	</script>
{% endblock %}
