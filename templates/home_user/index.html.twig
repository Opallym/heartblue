{% extends 'base.html.twig' %}

{% block title %}Profil de {{ user.name }}{% endblock %}

{% block stylesheets %}
    <link rel="stylesheet" href="{{ asset('css/profile.css') }}">
{% endblock %}

{% block body %}
<div class="profile-page">

    <!-- HEADER PHOTO + INFO -->
    <section class="profile-header">
        <div class="container header-container">
            <div class="avatar-section">
                <img src="{{ asset(user.avatar ? 'uploads/avatars/' ~ user.avatar : 'images/default-avatar.png') }}" alt="Avatar" class="avatar">
                <button class="btn-upload">Changer Photo</button>
            </div>
            <div class="info-section">
                <h1 class="name">{{ user.name }}, {{ user.age }}</h1>
                <p class="location">{{ user.city }}, {{ user.country }}</p>
                <div class="badges">
                    {% for badge in user.badges %}
                        <span class="badge">{{ badge }}</span>
                    {% endfor %}
                </div>
                <div class="actions">
                    <button class="btn-primary">Message</button>
                    <button class="btn-outline">Favoris</button>
                </div>
            </div>
        </div>
    </section>

    <!-- À PROPOS -->
    <section class="about-section">
        <div class="container">
            <h2>À propos de moi</h2>
            <p>{{ user.about }}</p>
        </div>
    </section>

    <!-- INTÉRÊTS -->
    <section class="interests-section">
        <div class="container">
            <h2>Mes intérêts</h2>
            <div class="interests">
                {% for interest in user.interests %}
                    <span class="interest">{{ interest }}</span>
                {% endfor %}
            </div>
        </div>
    </section>

    <!-- GALERIE SLIDER -->
    <section class="gallery-section">
        <div class="container">
            <h2>Galerie</h2>
            <div class="gallery-slider">
                <button class="slider-btn prev">&#10094;</button>
                <div class="slides">
                    {% for photo in user.gallery %}
                        <div class="slide">
                            <img src="{{ asset('uploads/gallery/' ~ photo) }}" alt="Galerie">
                        </div>
                    {% endfor %}
                </div>
                <button class="slider-btn next">&#10095;</button>
            </div>
        </div>
    </section>

    <!-- STATS -->
    <section class="stats-section">
        <div class="container">
            <h2>Mes Stats</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <span class="stat-label">Taille</span>
                    <span class="stat-value">{{ user.height }}</span>
                </div>
                <div class="stat-card">
                    <span class="stat-label">Poids</span>
                    <span class="stat-value">{{ user.weight }}</span>
                </div>
                <div class="stat-card">
                    <span class="stat-label">Centres d’intérêt</span>
                    <span class="stat-value">{{ user.interests|length }}</span>
                </div>
            </div>
        </div>
    </section>

</div>

{% endblock %}

{% block javascripts %}
<script>
    // SLIDER SIMPLE
    const slides = document.querySelectorAll('.slide');
    const prevBtn = document.querySelector('.prev');
    const nextBtn = document.querySelector('.next');
    const slidesContainer = document.querySelector('.slides');
    let currentIndex = 0;

    function showSlide(index) {
        if(index < 0) index = slides.length - 1;
        if(index >= slides.length) index = 0;
        currentIndex = index;
        const offset = -index * 100;
        slidesContainer.style.transform = 'translateX(' + offset + '%)';
    }

    prevBtn.addEventListener('click', () => showSlide(currentIndex - 1));
    nextBtn.addEventListener('click', () => showSlide(currentIndex + 1));

    showSlide(0);
</script>
{% endblock %}
